<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>WePay iOS SDK: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">WePay iOS SDK
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">WePay iOS SDK Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="https://www.wepay.com/img/redesign/logos/wepay-color.png"  alt="WePay logo" title="WePay"/>
</div>
<h2>Introduction</h2>
<p>The <a class="el" href="interface_we_pay.html">WePay</a> iOS SDK enables collection of payments via various payment methods(described below).</p>
<p>It is meant for consumption by <a href="http://www.wepay.com">WePay</a> partners who are developing their own iOS apps aimed at merchants and/or consumers.</p>
<p>Regardless of the payment method used, the SDK will ultimately return a Payment Token, which must be redeemed via a server-to-server <a href="http://www.wepay.com/developer">API</a> call to complete the transaction.</p>
<h2>Payment methods</h2>
<p>There are two types of payment methods:</p><ul>
<li>Consumer payment methods - to be used in apps where consumers directly pay and/or make donations</li>
<li>Merchant payment methods - to be used in apps where merchants collect payments from their customers</li>
</ul>
<p>The <a class="el" href="interface_we_pay.html">WePay</a> iOS SDK supports the following payment methods</p><ul>
<li>Card Swiper (Merchant) Using a Card Swiper, a merchant can accept in-person payments by swiping a consumer's card.</li>
<li>Manual Entry (Consumer/Merchant) The Manual Entry payment method lets consumer and merchant apps accept payments by allowing the user to manually enter card info.</li>
</ul>
<h2>Installation</h2>
<h4>Using <a href="https://cocoapods.org/">cocoapods</a> (recommended)</h4>
<ul>
<li>Add <code>pod "WePay"</code> to your podfile</li>
<li>Run <code>pod install</code></li>
<li>Done!</li>
</ul>
<h4>Using library binaries</h4>
<ul>
<li>Download the latest zip file from our <a href="https://github.com/wepay/wepay-ios/releases/latest">releases page</a></li>
<li>Unzip the file and copy the contents anywhere inside your project directory</li>
<li>In Xcode, go to your app's target settings. On the <code>Build Phases</code> tab, expand the <code>Link Binary With Libraries</code> section.</li>
<li>Include the following iOS frameworks:<ul>
<li>AudioToolbox.framework</li>
<li>AVFoundation.framework</li>
<li>CoreBluetooth.framework</li>
<li>CoreTelephony.framework</li>
<li>MediaPlayer.framework</li>
<li>SystemConfiguration.framework</li>
<li>libstdc++.6.0.9.dylib</li>
</ul>
</li>
<li>Also include the framework files you copied:<ul>
<li>G4XSwiper.framework</li>
<li>RPx.framework</li>
<li>RUA.framework</li>
<li>TrustDefenderMobile.framework</li>
<li>WePay.framework</li>
</ul>
</li>
<li>Done!</li>
</ul>
<h2>Documentation</h2>
<p>HTML documentation is hosted on our <a href="http://wepay.github.io/wepay-ios/">Github Pages Site</a>.</p>
<p>Pdf documentation is available on the <a href="https://github.com/wepay/wepay-ios/releases/latest">releases page</a> or as a direct <a href="https://github.com/wepay/wepay-ios/raw/master/documentation/wepay-ios.pdf">download</a>.</p>
<h2>SDK Organization</h2>
<h3><a class="el" href="_we_pay_8h_source.html">WePay.h</a></h3>
<p><code><a class="el" href="_we_pay_8h_source.html">WePay.h</a></code> is the starting point for consuming the SDK, and contains the primary class you will interact with. It exposes all the methods you can call to accept payments via the supported payment methods. Detailed reference documentation is available on the reference page for the <code><a class="el" href="interface_we_pay.html">WePay</a></code> class.</p>
<h3>Delegate protocols</h3>
<p>The SDK uses delegate protocols to respond to API calls. You must adopt the relevant protocols to receive responses to the API calls you make. Detailed reference documentation is available on the reference page for each protocol:</p><ul>
<li><code><a class="el" href="protocol_w_p_card_reader_delegate-p.html">WPCardReaderDelegate</a></code></li>
<li><code><a class="el" href="protocol_w_p_checkout_delegate-p.html">WPCheckoutDelegate</a></code></li>
<li><code><a class="el" href="protocol_w_p_tokenization_delegate-p.html">WPTokenizationDelegate</a></code></li>
</ul>
<h3>Data Models</h3>
<p>All other classes in the SDK are data models that are used to exchange data between your app and the SDK. Detailed reference documentation is available on the reference page for each class.</p>
<h2>Next Steps</h2>
<p>Head over to the <a href="http://wepay.github.io/wepay-ios/">documentation</a> to see all the API methods available. When you are ready, look at the samples below to learn how to interact with the SDK.</p>
<h2>Error Handling</h2>
<p><code><a class="el" href="_w_p_error_8h.html" title="WPError.h serves as documentation for all errors surfaced by the WePay iOS SDK. ">WPError.h</a></code> serves as documentation for all errors surfaced by the <a class="el" href="interface_we_pay.html">WePay</a> iOS SDK.</p>
<h2>Samples</h2>
<p>See the <a href="https://github.com/wepay/wepay-ios/tree/master/WePayExample">WePayExample app</a> for a working implementation of all API methods.</p>
<h3>Initializing the SDK</h3>
<ul>
<li>Complete the installation steps (above).</li>
<li>Include <a class="el" href="_we_pay_8h_source.html">WePay.h</a> <div class="fragment"><div class="line"><span class="preprocessor">#import &lt;WePay/WePay.h&gt;</span></div>
</div><!-- fragment --></li>
<li>Define a property to store the <a class="el" href="interface_we_pay.html">WePay</a> object <div class="fragment"><div class="line">\<span class="keyword">@property</span> (nonatomic, strong) <a class="code" href="interface_we_pay.html">WePay</a> *wepay;</div>
</div><!-- fragment --></li>
<li>Create a <a class="el" href="interface_w_p_config.html">WPConfig</a> object <div class="fragment"><div class="line"><a class="code" href="interface_w_p_config.html">WPConfig</a> *config = [[<a class="code" href="interface_w_p_config.html">WPConfig</a> alloc] initWithClientId:@&quot;your_client_id&quot; environment:kWPEnvironmentStage];</div>
</div><!-- fragment --></li>
<li>Initialize the <a class="el" href="interface_we_pay.html">WePay</a> object and assign it to the property <div class="fragment"><div class="line"><span class="keyword">self</span>.wepay = [[<a class="code" href="interface_we_pay.html">WePay</a> alloc] initWithConfig:config];</div>
</div><!-- fragment --></li>
</ul>
<h5>(optional) Providing permission to use location services for fraud detection</h5>
<ul>
<li>In Xcode, go to your projects settings. On the Build Phases tab, expand the Link Binary With Libraries section and include the CoreLocation.framework iOS framework.</li>
<li>Open your app's Info.plist file and add entries for NSLocationUsageDescription and NSLocationWhenInUseUsageDescription. <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;key&gt;NSLocationUsageDescription&lt;/key&gt;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;&lt;string&gt;Location information is used for fraud prevention&lt;/string&gt;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;&lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;&lt;string&gt;Location information is used for fraud prevention&lt;/string&gt;</div>
</div><!-- fragment --></li>
<li>Set the option on the config object, before initializing the <a class="el" href="interface_we_pay.html">WePay</a> object <div class="fragment"><div class="line">config.<a class="code" href="interface_w_p_config.html#a9ce0453ede6ac55095f7a8a30700b7ae">useLocation</a> = YES;</div>
</div><!-- fragment --></li>
</ul>
<h3>Integrating the Swipe payment method</h3>
<ul>
<li>Adopt the <a class="el" href="protocol_w_p_card_reader_delegate-p.html">WPCardReaderDelegate</a> and <a class="el" href="protocol_w_p_tokenization_delegate-p.html">WPTokenizationDelegate</a> protocols <div class="fragment"><div class="line">\<span class="keyword">@interface </span>MyWePayDelegate : NSObject &lt;<a class="code" href="protocol_w_p_card_reader_delegate-p.html">WPCardReaderDelegate</a>, <a class="code" href="protocol_w_p_tokenization_delegate-p.html">WPTokenizationDelegate</a>&gt;</div>
</div><!-- fragment --></li>
<li>Implement the <a class="el" href="protocol_w_p_card_reader_delegate-p.html">WPCardReaderDelegate</a> protocol methods <div class="fragment"><div class="line">- (void) cardReaderDidChangeStatus:(<span class="keywordtype">id</span>) status</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (status == kWPCardReaderStatusNotConnected) {</div>
<div class="line">        <span class="comment">// show UI that prompts the user to connect the Card Reader</span></div>
<div class="line">        <span class="keyword">self</span>.statusLabel.text = <span class="stringliteral">@&quot;Connect Card Reader&quot;</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == kWPCardReaderStatusWaitingForSwipe) {</div>
<div class="line">        <span class="comment">// show UI that prompts the user to swipe</span></div>
<div class="line">        <span class="keyword">self</span>.statusLabel.text = <span class="stringliteral">@&quot;Swipe Card&quot;</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == kWPCardReaderStatusSwipeDetected) {</div>
<div class="line">        <span class="comment">// provide feedback to the user that a swipe was detected</span></div>
<div class="line">        <span class="keyword">self</span>.statusLabel.text = <span class="stringliteral">@&quot;Swipe Detected...&quot;</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == kWPCardReaderStatusTokenizing) {</div>
<div class="line">        <span class="comment">// provide feedback to the user that the card info is being tokenized/verified</span></div>
<div class="line">        <span class="keyword">self</span>.statusLabel.text = <span class="stringliteral">@&quot;Tokenizing...&quot;</span>;</div>
<div class="line">    }  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == kWPCardReaderStatusStopped) {</div>
<div class="line">        <span class="comment">// provide feedback to the user that the swiper has stopped</span></div>
<div class="line">        <span class="keyword">self</span>.statusLabel.text = <span class="stringliteral">@&quot;Card Reader Stopped&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}  </div>
<div class="line"></div>
<div class="line">- (void) didReadPaymentInfo:(<a class="code" href="interface_w_p_payment_info.html">WPPaymentInfo</a> *)paymentInfo </div>
<div class="line">{</div>
<div class="line">    <span class="comment">// use the payment info (for display/recordkeeping)</span></div>
<div class="line">    <span class="comment">// wait for tokenization response</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void) didFailToReadPaymentInfoWithError:(NSError *)error   </div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Handle the error</span></div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Implement the <a class="el" href="protocol_w_p_tokenization_delegate-p.html">WPTokenizationDelegate</a> protocol methods <div class="fragment"><div class="line">- (void) paymentInfo:(<a class="code" href="interface_w_p_payment_info.html">WPPaymentInfo</a> *)paymentInfo didTokenize:(<a class="code" href="interface_w_p_payment_token.html">WPPaymentToken</a> *)paymentToken</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Send the tokenId (paymentToken.tokenId) to your server</span></div>
<div class="line">    <span class="comment">// Your server would use the tokenId to make a /checkout/create call to complete the transaction</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void) paymentInfo:(<a class="code" href="interface_w_p_payment_info.html">WPPaymentInfo</a> *)paymentInfo didFailTokenization:(NSError *)error</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Handle the error</span></div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Make the <a class="el" href="interface_we_pay.html">WePay</a> API call, passing in the instance(s) of the class(es) that implemented the delegate protocols <div class="fragment"><div class="line">[<span class="keyword">self</span>.wepay startCardReaderForTokenizingWithCardReaderDelegate:self tokenizationDelegate:self];</div>
<div class="line"><span class="comment">// Show UI asking the user to insert the card reader and wait for it to be ready</span></div>
</div><!-- fragment --></li>
<li>Thats it! The following sequence of events will occur:<ol type="1">
<li>The user inserts the card reader (or it is already inserted)</li>
<li>The SDK tries to detect the card reader and initialize it.<ul>
<li>If the card reader is not detected, the <code>cardReaderDidChangeStatus:</code> method will be called with <code>status = kWPCardReaderStatusNotConnected</code></li>
<li>If the card reader is successfully detected, then the <code>cardReaderDidChangeStatus:</code> method will be called with <code>status = kWPCardReaderStatusConnected</code>.</li>
<li>Next, if the card reader is successfully initialized, then the <code>cardReaderDidChangeStatus:</code> method will be called with <code>status = kWPCardReaderStatusWaitingForSwipe</code></li>
<li>Otherwise, <code>didFailToReadPaymentInfoWithError:</code> will be called with the appropriate error, and processing will stop (the <code>cardReaderDidChangeStatus:</code> method will be called with <code>status = kWPCardReaderStatusStopped</code>)</li>
</ul>
</li>
<li>If the card reader successfully initialized, it will wait for the user to swipe a card</li>
<li>If a recoverable error occurs during swiping, the <code>didFailToReadPaymentInfoWithError:</code> method will be called. After a few seconds, the <code>cardReaderDidChangeStatus:</code> method will be called with <code>status = kWPCardReaderStatusWaitingForSwipe</code> and the card reader will again wait for the user to swipe a card</li>
<li>If an unrecoverable error occurs during swiping, or the user does not swipe, the <code>didFailToReadPaymentInfoWithError:</code> method will be called, and processing will stop</li>
<li>Otherwise, the user swiped successfully, and the <code>cardReaderDidChangeStatus:</code> method will be called with <code>status = kWPCardReaderStatusSwipeDetected</code> followed by the <code>didReadPaymentInfo:</code> method</li>
<li>Next, the SDK will automatically send the obtained card info to <a class="el" href="interface_we_pay.html">WePay</a>'s servers for tokenization (the <code>cardReaderDidChangeStatus:</code> method will be called with <code>status = kWPCardReaderStatusTokenizing</code>)</li>
<li>If the tokenization succeeds, the <code>paymentInfo:didTokenize:</code> method will be called</li>
<li>Otherwise, if the tokenization fails, the <code>paymentInfo:didFailTokenization:</code> method will be called with the appropriate error</li>
</ol>
</li>
</ul>
<h3>Integrating the Manual payment method</h3>
<ul>
<li>Adopt the <a class="el" href="protocol_w_p_tokenization_delegate-p.html">WPTokenizationDelegate</a> protocol <div class="fragment"><div class="line">\<span class="keyword">@interface </span>MyWePayDelegate : NSObject &lt;<a class="code" href="protocol_w_p_tokenization_delegate-p.html">WPTokenizationDelegate</a>&gt;</div>
</div><!-- fragment --></li>
<li>Implement the <a class="el" href="protocol_w_p_tokenization_delegate-p.html">WPTokenizationDelegate</a> protocol methods <div class="fragment"><div class="line">- (void) paymentInfo:(<a class="code" href="interface_w_p_payment_info.html">WPPaymentInfo</a> *)paymentInfo didTokenize:(<a class="code" href="interface_w_p_payment_token.html">WPPaymentToken</a> *)paymentToken</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Send the tokenId (paymentToken.tokenId) to your server</span></div>
<div class="line">    <span class="comment">// Your server can use the tokenId to make a /checkout/create call to complete the transaction</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void) paymentInfo:(<a class="code" href="interface_w_p_payment_info.html">WPPaymentInfo</a> *)paymentInfo didFailTokenization:(NSError *)error</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Handle error</span></div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Instantiate a <a class="el" href="interface_w_p_payment_info.html">WPPaymentInfo</a> object using the user's credit card and address data <div class="fragment"><div class="line"><a class="code" href="interface_w_p_payment_info.html">WPPaymentInfo</a> *paymentInfo = [[<a class="code" href="interface_w_p_payment_info.html">WPPaymentInfo</a> alloc] initWithFirstName:@&quot;WPiOS&quot;</div>
<div class="line">                                                                 lastName:@&quot;Example&quot;</div>
<div class="line">                                                                    email:@&quot;wp.ios.example@wepay.com&quot;</div>
<div class="line">                                                           billingAddress:[[<a class="code" href="interface_w_p_address.html">WPAddress</a> alloc] initWithZip:@&quot;94306&quot;]</div>
<div class="line">                                                          shippingAddress:nil</div>
<div class="line">                                                               cardNumber:@&quot;5496198584584769&quot;</div>
<div class="line">                                                                      cvv:@&quot;123&quot;</div>
<div class="line">                                                                 expMonth:@&quot;04&quot;</div>
<div class="line">                                                                  expYear:@&quot;2020&quot;</div>
<div class="line">                                                          virtualTerminal:YES];</div>
<div class="line"><span class="comment">// Note: the virtualTerminal parameter above should be set to YES if a merchant is collecting payments manually using your app. It should be set to NO if a payer is making a manual payment using your app.</span></div>
</div><!-- fragment --></li>
<li>Make the <a class="el" href="interface_we_pay.html">WePay</a> API call, passing in the instance of the class that implemented the <a class="el" href="protocol_w_p_tokenization_delegate-p.html">WPTokenizationDelegate</a> protocol <div class="fragment"><div class="line">[<span class="keyword">self</span>.wepay tokenizeManualPaymentInfo:paymentInfo tokenizationDelegate:self];</div>
</div><!-- fragment --></li>
<li>Thats it! The following sequence of events will occur:<ol type="1">
<li>The SDK will send the obtained payment info to <a class="el" href="interface_we_pay.html">WePay</a>'s servers for tokenization</li>
<li>If the tokenization succeeds, the <code>paymentInfo:didTokenize:</code> method will be called</li>
<li>Otherwise, if the tokenization fails, the <code>paymentInfo:didFailTokenization:</code> method will be called with the appropriate error</li>
</ol>
</li>
</ul>
<h3>Integrating the Store Signature API</h3>
<ul>
<li>Adopt the <a class="el" href="protocol_w_p_checkout_delegate-p.html">WPCheckoutDelegate</a> protocol <div class="fragment"><div class="line">\<span class="keyword">@interface </span>MyWePayDelegate : NSObject &lt;<a class="code" href="protocol_w_p_checkout_delegate-p.html">WPCheckoutDelegate</a>&gt;</div>
</div><!-- fragment --></li>
<li>Implement the <a class="el" href="protocol_w_p_checkout_delegate-p.html">WPCheckoutDelegate</a> protocol methods <div class="fragment"><div class="line">- (void) didStoreSignature:(NSString *)signatureUrl</div>
<div class="line">             forCheckoutId:(NSString *)checkoutId</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// success! nothing to do here</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void) didFailToStoreSignatureImage:(UIImage *)image</div>
<div class="line">                        forCheckoutId:(NSString *)checkoutId</div>
<div class="line">                            withError:(NSError *)error</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// handle the error</span></div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Obtain the checkout_id associated with this signature from your server <div class="fragment"><div class="line">NSString *checkoutId = [<span class="keyword">self</span> obtainCheckoutId];</div>
</div><!-- fragment --></li>
<li>Instantiate a UIImage containing the user's signature <div class="fragment"><div class="line">UIImage *signature = [UIImage imageNamed:@&quot;dd_signature.png&quot;];</div>
</div><!-- fragment --></li>
<li>Make the <a class="el" href="interface_we_pay.html">WePay</a> API call, passing in the instance of the class that implemented the <a class="el" href="protocol_w_p_checkout_delegate-p.html">WPCheckoutDelegate</a> protocol <div class="fragment"><div class="line">[<span class="keyword">self</span>.wepay storeSignatureImage:signature </div>
<div class="line">                  forCheckoutId:checkoutId</div>
<div class="line">               checkoutDelegate:self];</div>
</div><!-- fragment --></li>
<li>Thats it! The following sequence of events will occur:<ol type="1">
<li>The SDK will send the obtained signature to <a class="el" href="interface_we_pay.html">WePay</a>'s servers</li>
<li>If the operation succeeds, the <code>didStoreSignature:forCheckoutId:</code> method will be called</li>
<li>Otherwise, if the operation fails, the <code>didFailToStoreSignatureImage:forCheckoutId:withError:</code> method will be called with the appropriate error </li>
</ol>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 9 2015 20:35:56 for WePay iOS SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
